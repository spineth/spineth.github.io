!function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,a){"use strict";t.e=function(e,t){return t?e.querySelector(t):document.querySelector(e)},t.f=function(e,t){return t?e.querySelectorAll(t):document.querySelectorAll(e)},t.a=function(e,t){e[t]=e[e.length-1],e.pop()},t.b=function(e,...t){e.apply(this,t)},t.c=function(e){return new Promise(function(t,a){e(function(e,n){e?a(e):t(n)})})},t.h=function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},t.d=function(e){var t=e.offsetWidth,a=window.getComputedStyle(e);return t+=parseInt(a.marginLeft),t+=parseInt(a.marginRight),t+=parseInt(a.borderLeftWidth),t+=parseInt(a.borderRightWidth)},t.g=function(e){e.offsetWidth}},function(e,t,a){"use strict";var n=a(0);class i{constructor(e){this.overlay=Object(n.e)(e),this.closeButtons=Object(n.f)(this.overlay,".overlay_close"),this.confirmButton=Object(n.e)(this.overlay,".overlay_confirm"),this.titleText=Object(n.e)(this.overlay,".overlay_title"),this.onConfirm=null,this.onCancel=null;var t=this;if(this.confirmButton&&this.confirmButton.addEventListener("click",function(){var e=t.onConfirm;e&&(t.close(),e(t.getInput()))}),this.closeButtons)for(let e=0;e<this.closeButtons.length;++e)this.closeButtons[e].addEventListener("click",function(){var e=t.onCancel;e&&(t.close(),e("cancelled"))})}close(){this.overlay.classList.remove("overlay_appear"),this.onConfirm=null,this.onCancel=null}getInput(){}async retrieveInput(){this.overlay.classList.add("overlay_appear");var e=this;return await new Promise(function(t,a){e.onConfirm=t,e.onCancel=a})}}t.a=i},function(e,t,a){"use strict";var n=a(0),i=a(6);class s{constructor(e,t){var a=Object(n.e)(e);this.listContainer=a,this.gameHeader=Object(n.e)(a,".game_list_header"),this.gameList=Object(n.e)(a,".game_list"),this.gameMap={},this.hideWhenEmpty=t,this.sortPredicate=null,this.lastVisibleSortedGame=null,this.gamePropBgStyle=this.createGamePropBgStyle();var i=this;this.listContainer.addEventListener("transitionend",function(e){if("top"===e.propertyName){var t=i.listContainer.getBoundingClientRect();t.top!==i.lastTopValue&&(i.lastTopValue=t.top,i.createGamePropBgStyle())}});var s=Object(n.e)(".content");s.addEventListener("transitionend",function(e){if("height"===e.propertyName){var t=s.getBoundingClientRect();t.height!==i.lastContentHeight&&(i.lastContentHeight=t.height,i.createGamePropBgStyle())}})}addGame(e,t,a,n){var s=this.gameMap[e];return s&&this.removeGame(e),this.listContainer.classList.remove("game_list_container_hidden"),(s=new i.a(a,n,t.gameColor)).gameData=t,s.sortable=!0,s.propBgElement.classList.add(this.gamePropBgStyle),s.attachParent(this.gameList),this.gameMap[e]=s,this.sortGames(),s}updateGame(e,t){var a=this.gameMap[e];return a&&(a.gameData=t),a}removeGame(e){var t=this.gameMap[e];t&&(this.removeGameHelper(t),delete this.gameMap[e],this.sortGames(),this.checkHideHeader())}removeAllGames(){for(var e=Object.keys(this.gameMap),t=0;t<e.length;++t){var a=e[t];let n=this.gameMap[a];n&&this.removeGameHelper(n)}this.gameMap={},this.sortGames(),this.checkHideHeader()}removeGameHelper(e){e.remove=!0,e.fadeOut(),e.addEventListener("transitionend",function(){e.detachParent()})}checkHideHeader(){this.hideWhenEmpty&&Object.keys(this.gameMap).length<=0&&this.listContainer.classList.add("game_list_container_hidden")}sortBy(e){this.sortPredicate=e,this.sortGames()}sortGames(){var e=[],t=this.gameList.children.length;for(let n=0;n<this.gameList.children.length;n++){var a=this.gameList.children[n];a.gameIcon.flowIndex=n,a.gameIcon.sortable&&(t=Math.min(t,n),e.push(a.gameIcon))}if(!(e.length<=0)){var n=this.sortPredicate;e.sort(function(e,t){if(t.remove&&!e.remove)return-1;if(e.remove&&!t.remove)return 1;var a=0;return n&&(a=n(e.gameData,t.gameData)),0===a?t.id-e.id:a});var i=e[0].getWidth();for(let a=0;a<e.length;++a){var s=e[a],r=i*(t+a)+"px";s.setLeftStyle(r),s.remove||(this.lastVisibleSortedGame=s)}}}createGamePropBgStyle(){var e="game_prop_background_"+this.listContainer.getAttribute("id"),t=Object(n.e)("#"+e);t&&t.parentElement.removeChild(t);var a=this.listContainer.getBoundingClientRect(),i=Object(n.e)(".content").getBoundingClientRect(),s=i.top-a.top+"px",r=a.height+(i.bottom-a.bottom)+"px",o=document.createElement("style");return o.setAttribute("id",e),o.type="text/css",o.innerHTML="."+e+"{ background: linear-gradient(to bottom, rgba(97, 115, 119, 0.9) "+s+", rgba(81, 99, 103, 0.9) "+r+"); }",Object(n.e)("head").appendChild(o),e}}t.a=s},function(e,t,a){"use strict";a.d(t,"a",function(){return i});class n{constructor(){this.enabled=!1}}var i=new n},function(e,t,a){"use strict";function n(e){return e&&"Main"!==e?e+=".":e="","https://"+e+"etherscan.io"}t.b=n;var i=a(0);class s{constructor(){this.network=null,this.node=null,this.latestBlock=null,this.currentAccount=null,this.listeners=[],this.networkNames={1:"Main",3:"Ropsten",4:"Rinkeby",42:"Kovan"},this.updateInfo()}async updateInfo(){for(;;){var e=this.network,t=this.node,a=this.latestBlock,n=this.currentAccount,s=this.currentBalance;this.network=await this.retrieveNetwork(),this.node=await this.retrieveNode(),this.latestBlock=await this.retrieveBlockNumber(),this.currentAccount=await this.retrieveCurrentAccount(),this.currentAccount&&(this.currentBalance=await this.retrieveCurrentAccountBalance(),this.currentBalance=this.currentBalance.toString(10));var r=[];this.network!==e&&r.push("network"),this.node!==t&&r.push("node"),this.latestBlock!==a&&r.push("latestBlock"),this.currentAccount!==n&&r.push("currentAccount"),this.currentBalance!==s&&r.push("currentBalance"),r.length>0&&this.notifyPropertyChanges(r),await Object(i.h)(1e3)}}getNetworkName(e){var t=this.networkNames[e];return t||"Private"}getEtherscanURL(){return n(this.getCurrentNetworkName())}getCurrentNetworkName(){return this.getNetworkName(this.network)}getCurrentBalanceEth(){return window.web3.fromWei(this.currentBalance,"ether")}async waitForChange(e){var t=this;return await Object(i.c)(function(a){t.listeners.push({waitProperties:e,cb:a})})}notifyPropertyChanges(e){for(var t=[],a=0;a<this.listeners.length;++a){var n=this.listeners[a],s=!1;n.waitProperties?n.waitProperties.find(function(t){return e.indexOf(t)>=0})&&(s=!0):s=!0,s&&(Object(i.a)(this.listeners,a),--a,t.push(n.cb))}for(a=0;a<t.length;++a)(0,t[a])()}async waitForTransaction(e){for(;;){await this.waitForChange(["latestBlock"]);var t=await Object(i.c)(function(t){window.web3.eth.getTransaction(e,t)});if(t&&t.blockNumber){var a=await Object(i.c)(function(t){window.web3.eth.getTransactionReceipt(e,t)});if(!a.status)throw"Transaction completed, but status unknown";if(0===parseInt(a.status))throw"Transaction failed, may have run out of gas";break}}}async retrieveNode(){return await Object(i.c)(function(e){window.web3.version.getNode(e)})}async retrieveNetwork(){return await Object(i.c)(function(e){window.web3.version.getNetwork(e)})}async retrieveNode(){return await Object(i.c)(function(e){window.web3.version.getNode(e)})}async retrieveBlockNumber(){return await Object(i.c)(function(e){window.web3.eth.getBlockNumber(e)})}async retrieveCurrentAccount(){return await Object(i.c)(function(e){window.web3.eth.getAccounts(function(t,a){e(t,a[0])})})}async retrieveCurrentAccountBalance(){var e=this;return await Object(i.c)(function(t){window.web3.eth.getBalance(e.currentAccount,t)})}}t.a=s},function(e,t,a){"use strict";a.d(t,"b",function(){return s});var n=a(0),i=a(3),s="0xee44B11148486c05112d6418b987D8B8C2632E8f";class r{constructor(e){switch(this.address=null,this.contract=null,this.abi=[{constant:!1,inputs:[{name:"newAuthority",type:"address"}],name:"changeAuthority",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"minBetWei",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"WHEEL_SIZE",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"gameId",type:"uint256"}],name:"calculateEarnings",outputs:[{name:"feeWei",type:"uint256"},{name:"weiPlayer1",type:"uint256"},{name:"weiPlayer2",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"gameContext",outputs:[{name:"player1",type:"address"},{name:"player2",type:"address"},{name:"betAmountInWei",type:"uint256"},{name:"wheelBetPlayer1",type:"uint256"},{name:"wheelBetPlayer2",type:"uint256"},{name:"wheelResult",type:"uint256"},{name:"expireTime",type:"uint256"},{name:"state",type:"uint8"},{name:"withdrawnPlayer1",type:"bool"},{name:"withdrawnPlayer2",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maxRevealSeconds",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"minBet",type:"uint256"},{name:"maxBet",type:"uint256"}],name:"changeBetLimits",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"player",type:"address"}],name:"getNextGameId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"gameId",type:"uint256"},{name:"wheelPositionHash",type:"uint256"}],name:"createGame",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"gameId",type:"uint256"}],name:"expireGame",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"gameId",type:"uint256"}],name:"cancelGame",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"gameId",type:"uint256"}],name:"withdrawEarnings",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"WIN_PERCENT_PER_DISTANCE",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"playerCompleteGames",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"gameId",type:"uint256"},{name:"playerSecret",type:"uint256"}],name:"revealBet",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"gameId",type:"uint256"},{name:"wheelBet",type:"uint256"}],name:"joinGame",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"authority",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"playerActiveGames",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"FEE_PERCENT",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"gameId",type:"uint256"},{name:"wheelBet",type:"uint256"},{name:"playerSecret",type:"uint256"}],name:"createWheelBetHash",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"openGames",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maxBetWei",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"gameId",type:"uint256"},{indexed:!0,name:"player",type:"address"},{indexed:!0,name:"eventType",type:"uint8"}],name:"GameEvent",type:"event"}],this.WAITING_FOR_PLAYERS=0,this.WAITING_FOR_REVEAL=1,this.COMPLETE=2,this.EVENT_CREATE=0,this.EVENT_CANCEL=1,this.EVENT_JOIN=2,this.EVENT_REVEAL=3,this.EVENT_EXPIRE=4,this.EVENT_COMPLETE=5,this.EVENT_WITHDRAW=6,this.EVENT_START_REVEAL=7,this.GAME_ADDED=0,this.GAME_REMOVED=1,this.GAME_UPDATED=2,this.TOPIC_EVENTADDRESS=0,this.TOPIC_GAMEID=1,this.TOPIC_PLAYER=2,this.TOPIC_TYPE=3,this.stateNames={0:"WaitingForPlayers",1:"WaitingForReveal",2:"Complete"},e){case"18":i.a.enabled&&(this.address="0x86FaCf4c5b0C28B34C24c92Ba2A12ac888Db6299");break;case"1":this.address=s;break;case"4":this.address="0xFaF98930E9ABd5676fD373186D1e37D545Fd9246";break;case"42":this.address="0xB7C6E6023f919060B8Cfb70BBB06DCF7aFDAEfB4"}if(null!=this.address){this.contract=window.web3.eth.contract(this.abi).at(this.address);for(var t=0;t<this.abi.length;++t){if("function"!==this.abi[t].type)continue;var a=this.abi[t].name;let e=this.abi[t].outputs;this.extendContractMethod(a,e)}}}isValid(){return null!==this.contract}extendContractMethod(e,t){this.contract[e].mapReturn=function(e){if(e.length!==t.length)throw"Mismatched array lengths";for(var a={},n=0;n<t.length;++n)a[t[n].name]=e[n];return a}}getGameColor(e){for(var t="#",a=0;a<6;++a){var n=e.charAt(e.length-1-a),i=parseInt(n,16);t+="0123456789ABCDEF".charAt(8+i%7)}return t}async retrieveBetLimits(){var e=this,t={};return t.min=await Object(n.c)(function(t){e.contract.minBetWei(t)}),t.min=window.web3.fromWei(t.min,"ether"),t.min=t.min.toString(10),t.max=await Object(n.c)(function(t){e.contract.maxBetWei(t)}),t.max=window.web3.fromWei(t.max,"ether"),t.max=t.max.toString(10),t}async retrieveGame(e){var t=this,a=await Object(n.c)(function(a){t.contract.gameContext(e,a)});(a=t.contract.gameContext.mapReturn(a)).betAmountInEth=window.web3.fromWei(a.betAmountInWei,"ether"),a.gameId=e;var i=window.web3.sha3(e);return a.gameColor=t.getGameColor(i),a.state.toNumber()===t.COMPLETE&&(a.outcome=await Object(n.c)(function(a){t.contract.calculateEarnings(e,a)}),a.outcome=t.contract.calculateEarnings.mapReturn(a.outcome),a.outcome.ethPlayer1=window.web3.fromWei(a.outcome.weiPlayer1,"ether"),a.outcome.ethPlayer2=window.web3.fromWei(a.outcome.weiPlayer2,"ether"),a.outcome.feeEth=window.web3.fromWei(a.outcome.feeWei,"ether")),a}async retrieveOpenGames(e){for(var t=this,a=0;!0;++a){var i=await Object(n.c)(function(e){t.contract.openGames(a,e)});if("0"===(i=i.toString(10)))break;if(!e(await t.retrieveGame(i)))break}}watchOpenGames(e,t){var a=this,n={};return n.active=!0,n.listener=async function(e){if(e.eventType===a.EVENT_CREATE){var i=await a.retrieveGame(e.gameId);n.active&&t(a.GAME_ADDED,i.gameId,i)}else e.eventType!==a.EVENT_JOIN&&e.eventType!==a.EVENT_CANCEL||n.active&&t(a.GAME_REMOVED,e.gameId)},this.retrieveOpenGames(function(e){return!!n.active&&(t(a.GAME_ADDED,e.gameId,e),!0)}).then(function(){n.active&&a.addGameEventListener({},e,n.listener)}),n}async retrieveActiveGames(e,t){var a=this;if(e)for(var i=0;!0;++i){var s=await Object(n.c)(function(t){a.contract.playerActiveGames(e,i,t)});if("0"===(s=s.toString(10)))break;if(!t(await a.retrieveGame(s)))break}}watchActiveGames(e,t,a){var n=this,i={};if(e)return i.active=!0,i.listener=async function(e){if(e.eventType===n.EVENT_CREATE||e.eventType===n.EVENT_JOIN){t=await n.retrieveGame(e.gameId);i.active&&a(n.GAME_ADDED,t.gameId,t)}else if(e.eventType===n.EVENT_CANCEL||e.eventType===n.EVENT_WITHDRAW)i.active&&a(n.GAME_REMOVED,e.gameId);else{var t=await n.retrieveGame(e.gameId);i.active&&a(n.GAME_UPDATED,t.gameId,t)}},this.retrieveActiveGames(e,function(e){return!!i.active&&(a(n.GAME_ADDED,e.gameId,e),!0)}).then(function(){i.active&&n.addGameEventListener({player:e},t,i.listener)}),i}async retrieveCompletedGames(e,t){var a=this;if(e)for(var i=0;!0;++i){var s=await Object(n.c)(function(t){a.contract.playerCompleteGames(e,i,t)});if("0"===(s=s.toString(10)))break;if(!t(await a.retrieveGame(s)))break}}watchCompletedGames(e,t,a){var n=this,i={};if(e)return i.active=!0,i.listener=async function(e){if(e.eventType===n.EVENT_WITHDRAW){var t=await n.retrieveGame(e.gameId);i.active&&a(n.GAME_ADDED,t.gameId,t)}},this.retrieveCompletedGames(e,function(e){return!!i.active&&(a(n.GAME_ADDED,e.gameId,e),!0)}).then(function(){i.active&&n.addGameEventListener({player:e,eventType:n.EVENT_WITHDRAW},t,i.listener)}),i}watchRecentGames(e,t){var a=this,n={};return n.active=!0,n.gameIdList={},n.listener=async function(e){if(e.eventType===a.EVENT_COMPLETE){var i=await a.retrieveGame(e.gameId);n.active&&(n.gameIdList[e.gameId]||(n.gameIdList[e.gameId]=!0,t(a.GAME_ADDED,i.gameId,i)))}},a.addGameEventListener({eventType:a.EVENT_COMPLETE},e,n.listener),n}async createGame(e,t,a,i){var s=this,r=window.web3.toWei(t,"ether"),o=await Object(n.c)(function(t){s.contract.getNextGameId(e,t)});o=o.toString(10);var c="";try{var l=window.web3.sha3(window.web3.toHex("Signing Spineth Game ID: "+o));c=await Object(n.c)(function(t){window.web3.eth.sign(e,l,t)})}catch(e){if("authentication needed: password or unlock"!=e.message)throw e;c=await i()}c=window.web3.sha3(c+o,{encoding:"hex"});var h=await Object(n.c)(function(e){s.contract.createWheelBetHash(o,a,c,e)});h=h.toString(10);var u=await Object(n.c)(function(t){s.contract.createGame.estimateGas(o,h,{from:e,value:r},t)});return await Object(n.c)(function(t){s.contract.createGame(o,h,{from:e,value:r,gas:u},t)})}async cancelGame(e,t){var a=this,i=await Object(n.c)(function(n){a.contract.cancelGame.estimateGas(t,{from:e,value:0},n)});return await Object(n.c)(function(n){a.contract.cancelGame(t,{from:e,value:0,gas:i},n)})}async joinGame(e,t,a){var i=this,s=await Object(n.c)(function(e){i.contract.gameContext(t,e)});s=i.contract.gameContext.mapReturn(s),s=s.betAmountInWei.toString(10);var r=await Object(n.c)(function(n){i.contract.joinGame.estimateGas(t,a,{from:e,value:s},n)});return await Object(n.c)(function(n){i.contract.joinGame(t,a,{from:e,value:s,gas:r},n)})}async expireGame(e,t){var a=this,i=await Object(n.c)(function(n){a.contract.expireGame.estimateGas(t,{from:e,value:0},n)});return Object(n.c)(function(n){a.contract.expireGame(t,{from:e,value:0,gas:i},n)})}async revealBet(e,t,a){var i=this,s="";try{var r=window.web3.sha3(window.web3.toHex("Signing Spineth Game ID: "+t));s=await Object(n.c)(function(t){window.web3.eth.sign(e,r,t)})}catch(e){if("authentication needed: password or unlock"!=e.message)throw e;s=await a()}s=window.web3.sha3(s+t,{encoding:"hex"});var o=await Object(n.c)(function(a){i.contract.revealBet.estimateGas(t,s,{from:e,value:0},a)});return await Object(n.c)(function(a){i.contract.revealBet(t,s,{from:e,value:0,gas:o},a)})}async withdrawEarnings(e,t){var a=this,i=await Object(n.c)(function(n){a.contract.withdrawEarnings.estimateGas(t,{from:e,value:0},n)});return await Object(n.c)(function(n){a.contract.withdrawEarnings(t,{from:e,value:0,gas:i},n)})}addGameEventListener(e,t,a){var n=this;this.removeGameEventListener(a);var i=n.contract.GameEvent(e),s=window.web3.eth.filter({address:n.contract.address.toLowerCase(),fromBlock:t,toBlock:"latest",topics:i.options.topics});a.gameEventFilter=s,a.gameEventListenerIds={},s.watch(function(e,i){if(!e){if(0!=i.blockNumber&&i.blockNumber<t)return;i.args={},i.args.gameId=window.web3.toBigNumber(i.topics[n.TOPIC_GAMEID]).toString(10),i.args.player=window.web3.toBigNumber(i.topics[n.TOPIC_PLAYER]).toString(10),i.args.eventType=parseInt(i.topics[n.TOPIC_TYPE]);var s=i.args.gameId+i.args.player+i.args.eventType;if(a.gameEventListenerIds[s])return;a.gameEventListenerIds[s]=!0,a(i.args)}})}removeGameEventListener(e){e&&e.gameEventFilter&&(e.gameEventFilter.stopWatching(function(){}),delete e.gameEventFilter,delete e.gameEventListenerIds)}stopWatch(e){e&&(this.removeGameEventListener(e.listener),e.active=!1)}}t.a=r},function(e,t,a){"use strict";var n=a(0);class i{constructor(e,t,a){this.id=++i.instanceCount,this.template=Object(n.e)("#game_icon_template"),this.gameElement=this.template.cloneNode(!0),this.gameElement.removeAttribute("id"),this.gameElement.classList.remove("hidden"),this.gameElement.gameIcon=this;var s=this;if(setTimeout(function(){s.gameElement.classList.remove("game_icon_fadeout")},0),this.labelElement=Object(n.e)(this.gameElement,".game_icon_text_label"),this.hoverElement=Object(n.e)(this.gameElement,".game_icon_text_hover"),this.propBgElement=Object(n.e)(this.gameElement,".game_prop_background"),this.labelElement.innerHTML=e,this.hoverElement.innerHTML=t,a){var r=this.createColorStyle(a);this.gameElement.classList.add(r)}}attachParent(e){e.appendChild(this.gameElement)}detachParent(){this.gameElement.parentNode&&this.gameElement.parentNode.removeChild(this.gameElement)}getWidth(){return Object(n.d)(this.gameElement)}addEventListener(e,t){this.gameElement.addEventListener(e,t)}setLabelText(e){this.labelElement.innerHTML=e}setHoverText(e){this.hoverElement.innerHTML=e}setLeftStyle(e){this.gameElement.style.left=e}setHighlight(e){e?this.gameElement.classList.add("game_icon_highlight"):this.gameElement.classList.remove("game_icon_highlight")}setPropertyBgWidth(e){this.propBgElement.style.width=e}setGameProperty(e,t,a){var i=Object(n.e)(this.gameElement,".game_prop_slot"+e),s=Object(n.e)(i,".game_prop_slot_label"),r=Object(n.e)(i,".game_prop_slot_text");s.innerHTML=t,r.innerHTML=a}fadeOut(){this.gameElement.classList.add("game_icon_fadeout")}createColorStyle(e){var t=e.substring(1),a=".game_color_"+t;if(!Object(n.e)(a)){var i=this.lighten(t),s=document.createElement("style");s.type="text/css",s.innerHTML=a+"{ background: linear-gradient(to bottom, "+e+", "+i+"); }",Object(n.e)("head").appendChild(s)}return a.substring(1)}lighten(e){var t=Number("0x"+(e[0]+e[1])),a=Number("0x"+(e[2]+e[3])),n=Number("0x"+(e[4]+e[5]));return t=Math.min(255,t+32),a=Math.min(255,a+32),n=Math.min(255,n+32),"#"+t.toString(16)+a.toString(16)+n.toString(16)}}t.a=i,i.instanceCount=0},function(e,t,a){"use strict";var n=a(0),i=a(1);class s extends i.a{constructor(e){super(e),this.value=Object(n.e)(this.overlay,".overlay_value"),this.slider=Object(n.e)(this.overlay,".overlay_slider");var t=this;this.slider.addEventListener("input",function(){t.updateSliderValue()}),this.value.contentEditable=!0,this.value.addEventListener("input",function(){var e=Number(t.value.innerHTML);isNaN(e)?t.value.innerHTML=t.slider.value:e<t.slider.min?t.value.innerHTML=t.slider.min:e>t.slider.max&&(t.value.innerHTML=t.slider.max),t.slider.value=t.value.innerHTML}),this.updateSliderValue()}updateSliderValue(){this.value.innerHTML=this.slider.value}initSlider(e,t,a){this.slider.min=e,this.slider.max=t,this.slider.value=a,this.updateSliderValue()}getInput(){return this.slider.value}}t.a=s},function(e,t,a){"use strict";var n=a(0),i=a(1);class s extends i.a{constructor(e){super(e),this.wheelContainer=Object(n.e)(this.overlay,".wheel_container"),this.wheelSlices=Object(n.f)(this.overlay,".wheel_slice"),this.selection=null;var t=this;for(let e=0;e<this.wheelSlices.length;++e)this.wheelSlices[e].addEventListener("click",function(){t.selection=t.wheelSlices[e].children[0].innerHTML,t.selection=Number(t.selection),isNaN(t.selection)||(t.lastSelected&&t.lastSelected.classList.remove("wheel_selected_you"),t.wheelSlices[e].classList.add("wheel_selected_you"),t.wheelContainer.setAttribute("centerContent",t.selection),t.confirmButton&&(t.confirmButton.disabled=!1),t.lastSelected=t.wheelSlices[e])});this.clearInput()}clearInput(){this.wheelContainer.removeAttribute("centerContent"),this.confirmButton&&(this.confirmButton.disabled=!0);for(let e=0;e<this.wheelSlices.length;++e)this.wheelSlices[e].classList.remove("wheel_selected_you")}getInput(){return this.selection}async retrieveInput(e){return this.clearInput(),this.titleText.innerHTML=e,super.retrieveInput()}}t.a=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(10);window.addEventListener("load",function(){(new n.a).start()})},function(e,t,a){"use strict";var n=a(0),i=a(4),s=a(5),r=a(11),o=a(12),c=a(13),l=a(14),h=a(15),u=a(16),m=a(17),d=a(18),p=a(19),v=a(7),w=a(20),y=a(8),g=a(21),b=a(22);class f{constructor(){this.statusBar=new b.a,this.contentMsg=Object(n.e)("#content_msg"),this.howToPlayOverlay=new p.a,this.welcomeOverlay=new m.a(this.howToPlayOverlay),this.tosOverlay=new d.a,this.ethOverlay=new v.a("#eth_input_overlay"),this.betOverlay=new y.a("#bet_input_overlay"),this.secretOverlay=new w.a("#secret_input_overlay"),this.revealOverlay=new w.a("#reveal_input_overlay"),this.gameFilterOverlay=new v.a("#game_filter_overlay"),this.gameSummaryOverlay=new g.a,this.header=new r.a(this.welcomeOverlay),this.footer=new o.a(this.howToPlayOverlay,this.tosOverlay),this.lastWaitForTxHash=null,this.ethConnection=null,this.spineth=null,this.onContentMsgFadeout=null}setContentMsg(e){var t=this;this.contentMsg.removeEventListener("transitionend",this.onContentMsgFadeout),this.onContentMsgFadeout=function(a){"opacity"===a.propertyName&&(t.contentMsg.removeEventListener("transitionend",t.onContentMsgFadeout),t.contentMsg.innerHTML="",e&&(t.contentMsg.innerHTML=Object(n.e)(e).innerHTML,t.contentMsg.classList.remove("content_msg_hide")))},this.contentMsg.classList.add("content_msg_hide"),this.contentMsg.addEventListener("transitionend",this.onContentMsgFadeout)}async hideContentMsg(){this.setContentMsg(null);var e=this;return Object(n.c)(function(t){var a=function(n){"opacity"===n.propertyName&&(e.contentMsg.removeEventListener("transitionend",a),t(null,!0))};e.contentMsg.addEventListener("transitionend",a)})}async start(){if(this.setContentMsg("#content_msg_connecting"),void 0!==window.web3){window.web3.eth||(window.web3=new window.Web3(window.web3.currentProvider));var e=new i.a;Object(n.b)(async function(){for(;;){var t=e.network;t?(await e.waitForChange(["network"]),t!==e.network&&document.location.reload()):await e.waitForChange(["network"])}});var t;try{await e.waitForChange(["network","latestBlock"]),t=e.network}catch(e){return void this.setContentMsg("#content_msg_noconnect")}var a=new s.a(t);a.isValid()?(await this.hideContentMsg(),this.init(e,a),this.run()):this.setContentMsg("#content_msg_nonetwork")}else this.setContentMsg("#content_msg_nosupport")}init(e,t){this.ethConnection=e,this.spineth=t,this.openGameList=new c.a(this.spineth,this.gameFilterOverlay),this.activeGameList=new l.a(this.spineth),this.completedGameList=new h.a,this.recentGameList=new u.a,this.footer.updateContract(this.ethConnection.getEtherscanURL(),this.spineth.address)}run(){var e=this.ethConnection,t=this.spineth,a=this.header,i=this.openGameList,s=this.activeGameList,r=this.completedGameList,o=this.recentGameList,c=this.tosOverlay,l=this.ethOverlay,h=this.betOverlay,u=this.gameSummaryOverlay,m=this.statusBar,d=this;Object(n.e)("#content_main").classList.remove("hidden"),this.welcomeOverlay.checkShow(),Object(n.b)(async function(){for(;;)a.update(e),await e.waitForChange()}),Object(n.b)(async function(){for(var a=null;;)t.stopWatch(a),i.removeAllGames(),a=t.watchOpenGames(e.latestBlock,function(a,n,s){switch(a){case t.GAME_ADDED:s.player1!==e.currentAccount&&i.addGame(n,s);break;case t.GAME_REMOVED:i.removeGame(n)}}),await e.waitForChange(["currentAccount"])}),Object(n.b)(async function(){for(var a=null;;)t.stopWatch(a),s.removeAllGames(),a=t.watchActiveGames(e.currentAccount,e.latestBlock,function(a,n,i){switch(a){case t.GAME_ADDED:s.addGame(e.currentAccount,n,i);break;case t.GAME_UPDATED:s.updateGame(e.currentAccount,n,i);break;case t.GAME_REMOVED:s.removeGame(n)}}),await e.waitForChange(["currentAccount"])}),Object(n.b)(async function(){for(var a=null;;)t.stopWatch(a),r.removeAllGames(),a=t.watchCompletedGames(e.currentAccount,e.latestBlock,function(t,a,n){r.addGame(e.currentAccount,a,n)}),await e.waitForChange(["currentAccount"])}),Object(n.b)(async function(){for(var a=null;;){t.stopWatch(a),o.removeAllGames();var n=Math.max(0,e.latestBlock-1e5);a=t.watchRecentGames(n,function(t,a,n){n.player1!==e.currentAccount&&n.player2!==e.currentAccount&&o.addGame(a,n)}),await e.waitForChange(["currentAccount"])}}),o.onGameClick=function(e,t){u.show(null,t)},r.onGameClick=function(t,a){u.show(e.currentAccount,a)},s.onGameClick=function(t,a){u.show(e.currentAccount,a)},i.onCreateClick=async function(){if(e.currentAccount){await c.checkAccept();var a=await t.retrieveBetLimits(),n=e.getCurrentBalanceEth();if(Number(n)<Number(a.min))m.showMessage("You need at least "+a.min+" eth to play");else{Number(n)<Number(a.max)&&(a.max=n),l.initSlider(a.min,a.max,a.min);var i=await l.retrieveInput(),s=await h.retrieveInput("CREATE GAME");try{var r=await t.createGame(e.currentAccount,i,s,async function(){return d.secretOverlay.retrieveInput()});d.waitForTransaction(r)}catch(e){m.showMessage(e)}}}else m.showAccountLockedMessage()},i.onGameClick=async function(a,n){if(e.currentAccount){await c.checkAccept();var i=e.getCurrentBalanceEth();if(Number(i)<Number(n.betAmountInEth))m.showMessage("You need at least "+n.betAmountInEth+" eth to join this game");else{var s=await h.retrieveInput("JOIN GAME");try{var r=await t.joinGame(e.currentAccount,a,s);d.waitForTransaction(r)}catch(e){m.showMessage(e)}}}else m.showAccountLockedMessage()},s.onCancel=async function(a){try{var n=await t.cancelGame(e.currentAccount,a);d.waitForTransaction(n)}catch(e){m.showMessage(e)}},s.onExpire=async function(a){try{var n=await t.expireGame(e.currentAccount,a);d.waitForTransaction(n)}catch(e){m.showMessage(e)}},s.onReveal=async function(a){try{var n=await t.revealBet(e.currentAccount,a,async function(){return d.revealOverlay.retrieveInput()});d.waitForTransaction(n)}catch(e){m.showMessage(e)}},s.onWithdraw=async function(a,n){await u.show(e.currentAccount,n,!0);try{var i=await t.withdrawEarnings(e.currentAccount,a);d.waitForTransaction(i)}catch(e){m.showMessage(e)}}}async waitForTransaction(e){for(this.lastWaitForTxHash=e,this.statusBar.showTransactionPendingMessage(this.ethConnection,e);;){if(await Object(n.h)(1e3),this.lastWaitForTxHash!==e)break;try{await this.ethConnection.waitForTransaction(e),this.statusBar.showTransactionCompleteMessage(this.ethConnection,e);break}catch(e){this.statusBar.showMessage(e);break}}}}t.a=f},function(e,t,a){"use strict";var n=a(0);class i{constructor(e){this.network=Object(n.e)("#network_value"),this.block=Object(n.e)("#block_value"),this.account=Object(n.e)("#account_value"),this.balance=Object(n.e)("#balance_value"),this.title=Object(n.e)(".title_section"),this.title.addEventListener("click",function(){e.show()})}update(e){this.network.innerHTML=e.getNetworkName(e.network),this.block.innerHTML=e.latestBlock,e.currentAccount?(this.account.innerHTML=e.currentAccount,this.balance.innerHTML=e.getCurrentBalanceEth()):(this.account.innerHTML="-",this.balance.innerHTML="-")}}t.a=i},function(e,t,a){"use strict";var n=a(0),i=a(4),s=a(5);class r{constructor(e,t){this.tos=Object(n.e)("#footer_tos"),this.play=Object(n.e)("#footer_play"),this.contract=Object(n.e)("#footer_contract"),this.tos.addEventListener("click",function(){t.show()}),this.play.addEventListener("click",function(){e.show()}),this.updateContract(Object(i.b)("Main"),s.b)}updateContract(e,t){this.contract.classList.remove("hidden");var a=e+"/address/"+t+"#code";this.contract.setAttribute("href",a)}}t.a=r},function(e,t,a){"use strict";var n=a(0),i=a(2),s=a(6);class r extends i.a{constructor(e,t){super("#open_game_list",!1),this.onCreateClick=null,this.onGameClick=null;var a=this;this.createGameIcon=new s.a("NEW","PLAY"),this.createGameIcon.setGameProperty(2,"","Create"),this.createGameIcon.setGameProperty(3,"","Game"),this.createGameIcon.setPropertyBgWidth("100px"),this.createGameIcon.attachParent(this.gameList),this.createGameIcon.propBgElement.classList.add(this.gamePropBgStyle),this.createGameIcon.addEventListener("click",function(){a.onCreateClick&&a.onCreateClick()}),this.gameFilterButton=Object(n.e)(this.gameHeader,".game_list_header_filter"),this.gameFilterButton.addEventListener("click",async function(){var n=await e.retrieveBetLimits();t.initSlider(n.min,n.max,n.min);var i=await t.retrieveInput();a.sortByEth(i)}),setTimeout(function(){a.listContainer.classList.remove("game_list_container_hidden")},33)}addGame(e,t){var a=parseFloat(Math.round(1e3*t.betAmountInEth)/1e3).toFixed(3),n=super.addGame(e,t,a+" ETH","PLAY",t.gameColor);n.setGameProperty(2,"CREATOR",t.player1),n.setGameProperty(3,"WAGER",t.betAmountInEth+" ETH");var i=this;n.addEventListener("click",function(){i.onGameClick&&i.onGameClick(e,t)})}sortByEth(e){this.sortBy(function(t,a){var n=t.betAmountInEth.toNumber(),i=a.betAmountInEth.toNumber();return Math.abs(n-e)-Math.abs(i-e)})}}t.a=r},function(e,t,a){"use strict";var n=a(2);class i extends n.a{constructor(e){super("#active_game_list",!0),this.spineth=e,this.onGameClick=null,this.onCancel=null,this.onReveal=null,this.onExpire=null,this.onWithdraw=null}getTimeString(e){var t="";return e>3600&&(t+=Math.floor(e/3600)+"h "),(e%=3600)>60&&(t+=Math.floor(e/60)+"m "),t+=e%60+"s"}determineGameState(e,t){var a=t.state.toNumber(),n={};if(n.creator="OPPONENT",t.player1===e&&(n.creator="YOU"),t.player1===e?n.opponent=t.player2:t.player2===e&&(n.opponent=t.player1),a===this.spineth.WAITING_FOR_PLAYERS)n.label="WAIT",n.hover="CANCEL",n.opponent="NONE",n.info="WAITING FOR OPPONENT",n.action=this.onCancel;else if(a===this.spineth.WAITING_FOR_REVEAL){var i=Math.floor(Date.now()/1e3),s=t.expireTime.toNumber()+300-i;t.player1===e?(n.label="REVEAL",n.hover="REVEAL",n.info="REVEAL YOUR BET",n.action=this.onReveal):s<=0?(n.label="EXPIRE",n.hover="EXPIRE",n.info="REVEAL TIME EXPIRED. EXPIRE GAME TO WIN",n.action=this.onExpire):(n.label="WAIT",n.hover=this.getTimeString(s),n.info="WAITING FOR OPPONENT TO REVEAL BET",n.action=null)}else a===this.spineth.COMPLETE&&(n.label="DONE",n.hover="WITH DRAW",n.info="WITHDRAW YOUR EARNINGS",n.action=this.onWithdraw);return n}updateGame(e,t,a){var n=super.updateGame(t,a);this.updateGameState(e,n)}updateGameState(e,t){var a=this.determineGameState(e,t.gameData);t.setLabelText(a.label),t.setHoverText(a.hover),t.setGameProperty(1,"INFO",a.info),t.setGameProperty(2,"OPPONENT",a.opponent),t.setGameProperty(3,"CREATED BY",a.creator),t.setGameProperty(4,"WAGER",t.gameData.betAmountInEth+" ETH"),a.action&&a.action!==this.onCancel?t.setHighlight(!0):t.setHighlight(!1)}addGame(e,t,a){var n=super.addGame(t,a,"","",a.gameColor);this.updateGameState(e,n);var i=this;n.addEventListener("click",function(){var a=i.determineGameState(e,n.gameData);a.action?a.action(t,n.gameData):i.onGameClick&&i.onGameClick(t,n.gameData)});var s;n.addEventListener("mouseover",function(){i.updateGameState(e,n),s=setInterval(function(){i.updateGameState(e,n)},1e3)}),n.addEventListener("mouseout",function(){clearInterval(s)})}}t.a=i},function(e,t,a){"use strict";var n=a(2);class i extends n.a{constructor(){super("#completed_game_list",!0),this.onGameClick=null}addGame(e,t,a){var n=0,i="";a.player1===e?(n=a.outcome.ethPlayer1,i=a.player2):a.player2===e&&(n=a.outcome.ethPlayer2,i=a.player1);var s=0,r="DRAW";n.toNumber()>a.betAmountInEth.toNumber()?(s=a.outcome.feeEth,r="WON"):n.toNumber()<a.betAmountInEth.toNumber()&&(s=0,r="LOST");var o=super.addGame(t,a,r,r,a.gameColor);o.setGameProperty(1,"OPPONENT",i),o.setGameProperty(2,"WAGER",a.betAmountInEth+" ETH"),o.setGameProperty(3,"PAYOUT",n+" ETH"),o.setGameProperty(4,"FEE PAID",s+" ETH");var c=this;o.addEventListener("click",function(){c.onGameClick&&c.onGameClick(t,a)})}}t.a=i},function(e,t,a){"use strict";var n=a(2);class i extends n.a{constructor(){super("#recent_game_list",!0),this.onGameClick=null}addGame(e,t){this.gameList.children.length>=16&&this.lastVisibleSortedGame&&this.removeGame(this.lastVisibleSortedGame.gameData.gameId);var a=parseFloat(Math.round(1e3*t.betAmountInEth)/1e3).toFixed(3)+" ETH",n=super.addGame(e,t,a,a,t.gameColor);n.setGameProperty(1,"PLAYER 1",t.player1),n.setGameProperty(2,"PLAYER 2",t.player2),n.setGameProperty(3,"WAGER",t.betAmountInEth+" ETH");var i=this;n.addEventListener("click",function(){i.onGameClick&&i.onGameClick(e,t)})}}t.a=i},function(e,t,a){"use strict";var n=a(1),i=a(3);class s extends n.a{constructor(e){super("#welcome_overlay"),this.alwaysShow=!1,this.welcomeVersion="welcome_v1.0",this.howToPlayOverlay=e}getInput(){return!0}async show(){try{await this.retrieveInput()&&this.howToPlayOverlay.show()}catch(e){}}async checkShow(){!i.a.enabled&&window.localStorage.getItem(this.welcomeVersion)||(await this.show(),window.localStorage.setItem(this.welcomeVersion,!0))}}t.a=s},function(e,t,a){"use strict";var n=a(1),i=a(3);class s extends n.a{constructor(){super("#tos_overlay"),this.tosVersion="tos_v1.0"}async checkAccept(){!i.a.enabled&&window.localStorage.getItem(this.tosVersion)||(this.confirmButton.innerHTML="ACCEPT",await this.retrieveInput(),window.localStorage.setItem(this.tosVersion,!0))}async show(){this.confirmButton.innerHTML="CLOSE";try{await this.retrieveInput()}catch(e){}}}t.a=s},function(e,t,a){"use strict";var n=a(0),i=a(1),s=a(7),r=a(8);class o extends i.a{constructor(){super("#howtoplay_overlay"),this.ethInput=new s.a("#howtoplay_eth_input"),this.ethInput.initSlider(.001,10,5),this.betInput=new r.a("#howtoplay_bet_input"),this.highlightIcons=[Object(n.e)("#howtoplay_highlight1"),Object(n.e)("#howtoplay_highlight2"),Object(n.e)("#howtoplay_highlight3")]}close(){for(var e=0;e<this.highlightIcons.length;++e)this.highlightIcons[e].classList.remove("game_icon_highlight");super.close()}async show(){for(var e=0;e<this.highlightIcons.length;++e)this.highlightIcons[e].classList.add("game_icon_highlight");try{await this.retrieveInput()}catch(e){}}}t.a=o},function(e,t,a){"use strict";var n=a(0),i=a(1);class s extends i.a{constructor(e){super(e),this.text=Object(n.e)(this.overlay,".overlay_text_input");var t=this;this.text.addEventListener("input",function(){t.confirmButton.disabled=""==t.text.value}),this.overlay.addEventListener("transitionend",function(e){"opacity"==e.propertyName&&t.text.focus()})}getInput(){return this.text.value}async retrieveInput(){return this.text.value="",this.confirmButton.disabled=!0,super.retrieveInput()}}t.a=s},function(e,t,a){"use strict";var n=a(0),i=a(1);class s extends i.a{constructor(){super("#game_summary_overlay"),this.message=Object(n.e)(this.overlay,"#game_summary_message > .overlay_message"),this.opponent=Object(n.e)(this.overlay,"#game_summary_opponent > div"),this.betAmount=Object(n.e)(this.overlay,"#game_summary_bet > .game_summary_number"),this.earnings=Object(n.e)(this.overlay,"#game_summary_earnings > .game_summary_number"),this.payout=Object(n.e)(this.overlay,"#game_summary_payout > .game_summary_number"),this.fee=Object(n.e)(this.overlay,"#game_summary_fee > .game_summary_number"),this.wheelMarker=Object(n.e)(this.overlay,".overlay_wheel_marker"),this.wheelOuterContainer=Object(n.e)(this.overlay,".wheel_outer_container"),this.wheelContainer=Object(n.e)(this.overlay,".wheel_container"),this.wheelSlices=Object(n.f)(this.wheelContainer,".wheel_slice")}clear(){this.message.innerHTML="",this.opponent.innerHTML="",this.betAmount.innerHTML="",this.earnings.innerHTML="",this.payout.innerHTML="",this.fee.innerHTML="",this.message.parentNode.classList.add("game_summary_hidden"),this.opponent.parentNode.classList.add("game_summary_hidden"),this.betAmount.parentNode.classList.add("game_summary_hidden"),this.earnings.parentNode.classList.add("game_summary_hidden"),this.payout.parentNode.classList.add("game_summary_hidden"),this.fee.parentNode.classList.add("game_summary_hidden"),this.wheelMarker.classList.add("hidden"),this.wheelContainer.classList.remove("wheel_spin"),Object(n.g)(this.wheelContainer);for(let e=0;e<this.wheelSlices.length;++e)this.wheelSlices[e].classList.remove("wheel_selected_you"),this.wheelSlices[e].classList.remove("wheel_selected_opponent"),this.wheelSlices[e].classList.remove("wheel_selected_both")}async show(e,t,a){this.clear();var n=t.player1,i=t.player2,s=t.wheelBetPlayer1.toNumber(),r=t.wheelBetPlayer2.toNumber(),o=t.outcome?t.outcome.ethPlayer1:0,c=t.betAmountInEth;if(t.player1===e?n="You":t.player2===e&&(n="You",i=t.player1,s=t.wheelBetPlayer2.toNumber(),r=t.wheelBetPlayer1.toNumber(),o=t.outcome?t.outcome.ethPlayer2:0),t.outcome){if(this.wheelMarker.classList.remove("hidden"),this.wheelSlices[s].classList.add("wheel_selected_you"),this.setWheelNumber(t.wheelResult),a){var l=this;return await new Promise(function(a,n){l.wheelContainer.classList.add("wheel_spin");var i=function(){l.wheelContainer.removeEventListener("animationend",i),l.show(e,t,!1),a()};l.wheelContainer.addEventListener("animationend",i),l.retrieveInput().then(function(){l.wheelContainer.removeEventListener("animationend",i),n("overlay was closed")})})}this.wheelSlices[r].classList.add("wheel_selected_opponent"),s===r&&this.wheelSlices[s].classList.add("wheel_selected_both");var h=o.minus(c),u=n+" tied this game",m=0;h.toNumber()>0?(u=n+" won this game",h=h.plus(t.outcome.feeEth),m=-t.outcome.feeEth):h.toNumber()<0&&(u=n+" lost this game");var d=h.dividedBy(c).times(100).toNumber(),p=this.countDecimals(c);p=Math.max(p,this.countDecimals(h)),p=Math.max(p,this.countDecimals(m)),p=Math.max(p,this.countDecimals(o)),this.setField(this.message,u),this.setField(this.opponent,"Against "+i),this.setField(this.betAmount,c.toFixed(p)),this.setField(this.earnings,"("+d+"%) "+h.toFixed(p)),this.setField(this.fee,m.toFixed(p)),this.setField(this.payout,o.toFixed(p))}else this.setField(this.opponent,"Opponent "+i),this.setField(this.betAmount,c),s<this.wheelSlices.length&&(this.wheelSlices[s].classList.add("wheel_selected_you"),this.setField(this.message,"Waiting for opponent to reveal bet"));try{await this.retrieveInput()}catch(e){}}countDecimals(e){var t=(""+e).split(".")[1];return t?t.length:0}setWheelNumber(e){var t=360-360/this.wheelSlices.length*e;this.wheelOuterContainer.style.transform="rotate("+t+"deg)"}setField(e,t){e.parentNode.classList.remove("game_summary_hidden"),e.innerHTML=t}}t.a=s},function(e,t,a){"use strict";var n=a(0);class i{constructor(){this.statusBarElement=Object(n.e)("#status_bar"),this.dismissButton=Object(n.e)(this.statusBarElement,".status_bar_dismiss"),this.contentElement=Object(n.e)(this.statusBarElement,".status_bar_content"),this.hideDelay=null;var e=this;this.dismissButton.addEventListener("click",function(){e.statusBarElement.classList.remove("status_bar_rolldown")})}hide(){this.statusBarElement.classList.remove("status_bar_rolldown")}delayedHide(e){var t=this;clearTimeout(this.hideDelay),this.hideDelay=setTimeout(function(){t.hide()},e)}showElements(e,t){if(this.contentElement.innerHTML="",e.length>0)for(var a=0;a<e.length;++a)this.contentElement.appendChild(e[a]);else this.contentElement.appendChild(e);this.statusBarElement.classList.add("status_bar_rolldown"),t>0&&this.delayedHide(t)}showMessage(e,t){t||(t=5e3);var a=document.createElement("span");a.innerHTML=e,this.showElements(a,t)}showAccountLockedMessage(){this.showMessage("Your account appears to be locked, unlock your account to play",5e3)}showTransactionPendingMessage(e,t){var a=document.createElement("a");a.innerHTML="Waiting for transaction to be mined",a.target="_blank";var n=e.getEtherscanURL();n+="/search?q="+t,a.href=n;var i=document.createElement("span");i.classList.add("status_bar_spinner"),this.showElements([a,i],0)}showTransactionCompleteMessage(e,t){var a=document.createElement("a");a.innerHTML="Transaction successfully mined!",a.target="_blank";var n=e.getEtherscanURL();n+="/search?q="+t,a.href=n,this.showElements(a,5e3)}}t.a=i}]);